
<script src="https://d3js.org/d3.v4.min.js"></script>
<body>
    <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="-250 -250 500 500" preserveAspectRatio="xMidYMid meet">
        <svg id="chart" width="500" height="400"></svg>
    </svg>
    {{!-- <div id="chartB" style="width: 600px"></div> --}}
    <script>


        // Step 3
        const svg = d3.select("svg"),
            width = svg.attr("width"),
            height = svg.attr("height"),
            radius = 200;
        let total = {{total_p}}
        let nulos = {{nulos_p}}
        let blancos = {{blancos_p}}

        
        // Step 1        
        var data = [{name: "total", share: total}, 
                    {name: "nulos", share: nulos},
                    {name: "blancos", share: blancos}];
        
        var g = svg.append("g")
                   .attr("transform", "translate(" + width / 2 + "," + height / 2 + ")");

        // Step 4


        var ordScale = d3.scaleOrdinal()
                        	.domain(data)
                        	.range(['#d4d4d4','#31b442','#bb2c1f']);

        // Step 5
        var pie = d3.pie().value(function(d) { 
                return d.share; 
            });

        var arc = g.selectAll("arc")
                   .data(pie(data))
                   .enter();

        // Step 6
        var path = d3.arc()
                     .outerRadius(radius)
                     .innerRadius(0);

        arc.append("path")
           .attr("d", path)
           .attr("fill", function(d) { return ordScale(d.data.name); });

        // Step 7
        var label = d3.arc()
                      .outerRadius(radius)
                      .innerRadius(0);
            
 
    </script>
  </body>